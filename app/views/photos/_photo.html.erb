<li id="photo-<%= photo.id %>">
  <span class="photo">
    <%= image_tag photo.display_image %>
  </span>

  <span class="likes">
    <% @photo = Photo.find_by(id: photo.id) %>
    <% if current_user.already_liked?(photo) %>
      <%= button_to 'いいねを取り消す', photo_like_path(@photo), method: :delete %>
    <% else %>
      <%= button_to 'いいね', photo_likes_path(@photo), method: :post %>
    <% end %>
  </span>
  
  <ol class="comments">
      <% @comments = photo.comments.compact %>
      <%= render @comments %>
  </ol>
  
  <section class="comment_form">
      <% @photo = photo %>
      <%= render 'shared/comment_form' %>
  </section>

</li>