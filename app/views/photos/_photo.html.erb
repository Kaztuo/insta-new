<div class="col-md-8">
  <li id="photo-<%= photo.id %>">
    <span class="photo">
      <%= image_tag photo.display_image if photo.image.attached? %>
    </span>
  
    <span class="likes">
      <% if current_user.already_liked?(photo) %>
        <%= button_to 'いいねを取り消す', like_path(id: Like.find_by(photo_id: photo.id).id,
                                              photo_id: photo.id), 
                                          method: :delete %>
      <% else %>
        <%= button_to 'いいね', likes_path(photo_id: photo.id), method: :post %>
      <% end %>
    </span>
    
    <ol class="comments">
        <% @comments = photo.comments.compact %>
        <%= render @comments %>
    </ol>
    
    <section class="comment_form">
        <% @photo = photo %>
        <%= render 'shared/comment_form' %>
    </section>
  </li>
</div>
